# 메인차트(캔들차트) 적용 로직 정리

## 1. 기본 차트 구성
- **캔들스틱 차트**: 시가/고가/저가/종가(OHLC) 데이터 시각화 (상승봉: 초록, 하락봉: 빨강)
- **HMA(헐 이동평균선)**: 파란색 실선
- **만트라 밴드(상단/하단)**: 상단-빨간 점선, 하단-초록 점선
- **볼린저 밴드**: 중심선-보라 실선, 상단/하단-보라 점선
- **가격선**: 종가를 검은색 실선으로 표시
- **만트라 밴드 영역 채우기**: HMA~상단(연한 빨강), 하단~HMA(연한 초록)

## 2. 지지선/저항선/현재가 표시
- **현재가**: 종가에 점선(:)과 텍스트(날짜, 가격) 표시
- **지지선/저항선**: 20일 박스권 기준, 각각 초록/빨간 점선과 텍스트로 표시

## 3. 매수/매도 신호 표시
- **신호 생성**: get_hma_mantra_md_signals 함수로 매수/매도 신호(강/약, B1/B2/B3/T1/T2 등) 생성
- **신호 마커**: 매수-파란 삼각형, 매도-빨간 역삼각형, 신호 종류별 별표(*) 추가(특정 조건 만족 시)
- **신호 텍스트**: 신호 발생일에 날짜+신호번호 표시

## 4. 조건부 수평선/수직선(사용자 지정)
- **조건**:
    - 거래량이 볼륨 볼린저밴드 상단(20일) 초과
    - MACD 골든크로스 구간(MACD > Signal, 골든크로스 이후)
    - RSI14 ≥ 50
- **표시**:
    - 모든 subplot에 마젠타색 점선 수직선
    - 메인차트에 종가 기준 수평선(양봉: 라임, 음봉: 빨강, 두께 0.6)
    - 각 수평선의 가격을 오른쪽 끝(y축 근처)에 검은색 텍스트로 표시

## 5. 범례
- 캔들(상승/하락), 가격선, HMA/만트라밴드, 볼린저밴드, 신호 종류별 마커 등 다양한 요소를 범례로 표시

## 6. 기타
- x축: 날짜, y축: 가격
- 그리드, 폰트, 레이아웃 등 시각적 요소 세부 조정 