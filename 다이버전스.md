# 📘 다이버전스(Divergence) 실전 활용법: RSI & MACD 기반 전략

## 🧭 다이버전스란?
- 주가와 보조지표(RSI, MACD 등)가 **서로 다른 방향**으로 움직이는 현상
- **추세 전환** 또는 **추세 지속**의 신호로 활용 가능

> 기본 파라미터
> - RSI: 14
> - MACD: 12, 26, 9 (MACD, Signal, Histogram)

---

## 📊 다이버전스 기본 구조

| 유형 | 주가 | 지표 | 해석 |
|------|------|------|------|
| 하락 다이버전스 (일반) | HH | LH | 고점 상승 vs 지표 하락 → 하락 가능성 |
| 하락 다이버전스 (히든) | LH | HH | 주가 약세 vs 지표 강세 → 하락 지속 가능성 |
| 상승 다이버전스 (일반) | LL | HL | 저점 하락 vs 지표 상승 → 반등 가능성 |
| 상승 다이버전스 (히든) | HL | LL | 주가 강세 vs 지표 약세 → 상승 지속 가능성 |

### 🧾 약어 레전드
- HH: Higher High (이전 고점보다 높은 고점)
- HL: Higher Low (이전 저점보다 높은 저점)
- LH: Lower High (이전 고점보다 낮은 고점)
- LL: Lower Low (이전 저점보다 낮은 저점)

---

## 🟦 1. RSI + 다이버전스 실전 활용

### ✅ 상승 다이버전스 (매수 시그널)
- **주가**: LL (낮은 저점)
- **RSI**: HL (높은 저점)
- **보조조건**: RSI 30 이하
- **매수 포인트**: 양봉 출현, 지지선 확인

> 예시  
> 주가: 95 → 90 (신저점)  
> RSI: 28 → 34 (저점 상승)  
> → 반등 가능성, 매수 시그널

---

### ✅ 하락 다이버전스 (매도 시그널)
- **주가**: HH (높은 고점)
- **RSI**: LH (낮은 고점)
- **보조조건**: RSI 70 이상
- **매도 포인트**: 음봉 출현, 추세선 이탈

> 예시  
> 주가: 120 → 125 (신고점)  
> RSI: 72 → 65 (고점 하락)  
> → 하락 경고, 익절 또는 매도 고려

---

## 🟩 2. MACD + 다이버전스 실전 활용

### ✅ 상승 다이버전스 (매수 시그널)
- **주가**: LL (낮은 저점)
- **MACD 히스토그램**: HL (높은 저점)
- **보조조건**: MACD 골든크로스
- **매수 포인트**: 양봉 출현, 지표 반전

> 예시  
> 주가: 45 → 42 (신저점)  
> MACD 히스토그램: -1.4 → -0.8  
> → 반등 시도, 매수 가능성

---

### ✅ 하락 다이버전스 (매도 시그널)
- **주가**: HH (높은 고점)
- **MACD 히스토그램**: LH (낮은 고점)
- **보조조건**: MACD 데드크로스
- **매도 포인트**: 캔들 반전, 추세선 이탈

> 예시  
> 주가: 89 → 92  
> MACD 히스토그램: 1.8 → 1.2  
> → 하락 경고, 익절 또는 숏 진입 고려

---

## 🔁 일반 vs 히든 다이버전스 요약

| 구분 | 일반 다이버전스 | 히든 다이버전스 |
|------|------------------|------------------|
| 해석 | 추세 **반전** | 추세 **지속** |
| 시그널 | 진입/청산 판단 | 기존 추세 강화 확인 |
| 발생 지점 | 고점 or 저점 차이 | 중간 파동에서 확인 |

---

## ⏱️ 타임프레임과 스윙 판단 기준
- 분석 타임프레임은 매매 주기와 일치시킵니다. (스윙: 일봉/주봉, 데이: 5분/15분 등)
- HH/LL 판정은 최근 파동의 피벗 고저점 기준으로 합니다. (예: 최근 20~50봉 내 스윙 고저점)
- 심지는 포함하되, 필요 시 종가 기준으로 보조 확인합니다. (특히 RSI는 종가 기준 적합)
- 강한 추세장에서는 미세한 다이버전스는 무시하고 상위 타임프레임을 우선합니다.

## ❌ 무효화(Invalidation) 체크리스트
- 다이버전스 발생 후 가격이 직전 파동의 HH/LL을 갱신하면 신호 신뢰도 하락
- RSI가 반대로 극단(>70 또는 <30)으로 재진입하면 신호 재평가
- MACD 데드/골든크로스가 즉시 되돌려지면(휩쏘) 보수적으로 대응
- 거래량이 동반되지 않으면(특히 돌파 구간) 신뢰도 낮음
- 손절 기준: 신호 발생 캔들의 고저점 이탈 또는 최근 피벗 이탈

## 🖼️ 예시 차트 (선택)
- 프로젝트에서 생성한 차트를 참고하세요. 예: `output/hma_mantra/TSLA/TSLA_volume_profile_overlay_YYYY-MM-DD_YYYY-MM-DD_chart.png`
- 동일 구간에 RSI/MACD 패널과 함께 LL/HH, HL/LH 구조를 직접 표시해 검증하세요.

## ✅ 실전 팁
- **RSI**: 과매도(<30), 과매수(>70) 함께 고려
- **MACD**: 신호선 교차 타이밍 주목
- **다이버전스 단독 신호로 매매하지 말고**, 캔들 패턴, 거래량, 지지/저항선과 함께 사용