# 주식 기술적 분석 시스템

이 프로그램은 주식의 기술적 분석을 수행하고 시각화하는 도구입니다. 다양한 기술적 지표를 활용하여 주가 동향을 분석하고, 이를 직관적인 차트로 표현합니다.

## 1. 프로젝트 구조
```
stock_tech_v1/
├── main.py                  # 메인 실행 파일
├── requirements.txt         # 필요한 패키지 목록
├── .env                     # 환경 변수 설정
├── .gitignore              # Git 무시 파일 목록
├── README.md               # 프로젝트 설명
├── src/                    # 소스 코드 디렉토리
│   ├── data_fetcher.py     # 데이터 수집
│   ├── technical_analysis.py # 기술적 분석
│   ├── visualization.py    # 시각화
│   └── utils.py           # 유틸리티 함수
├── docs/                   # 문서 디렉토리
├── test/                   # 단위테스트
├── backtest/               # backtest 디렉토리
└── output/                 # 결과 저장 디렉토리
```

## 2. 주요 기능

### 2.1 데이터 수집
- Yahoo Finance API 활용
- 지원 데이터:
  - OHLCV (시가, 고가, 저가, 종가, 거래량)
  - 기간 설정 가능 (1일/1주/1개월/1년)
  - 시간 간격 설정 (1분/1시간/1일)

### 2.2 기술적 지표 계산

#### 이동평균선
- MA5 (5일)
- MA20 (20일)
- MA60 (60일)
- MA120 (120일)
- MA200 (200일)

#### 변동성 지표
- 볼린저 밴드 (20일 기준)
  - 상단밴드 (Upper Band)
  - 중간밴드 (Middle Band)
  - 하단밴드 (Lower Band)
- 볼린저 밴드 %B

#### 모멘텀 지표
- RSI (Relative Strength Index)
- MACD (Moving Average Convergence Divergence)
- MFI (Money Flow Index)

#### 거래량 지표
- OBV (On-Balance Volume)
- 거래량 이동평균 (20일)

### 2.3 차트 구성

#### 메인 차트 (상단)
- 캔들스틱 차트
  - 상승봉: 빨간색
  - 하락봉: 파란색
- 이동평균선 오버레이
- 볼린저 밴드 오버레이

#### 보조지표 차트 (하단)
1. 거래량
2. RSI
3. MACD
4. 볼린저 밴드 %B
5. OBV
6. MFI
7. 가격 추세

### 2.4 출력 파일
- 차트 이미지: `{종목코드}_technical_analysis.png`
- 기술적 지표 데이터: `{종목코드}_data.csv`

## 3. 사용 방법

### 3.1 설치
```bash
# 필요한 패키지 설치
pip install -r requirements.txt
```

### 3.2 실행
```bash
python main.py --ticker [종목코드] --period [기간] --interval [간격] --visualize
```

### 3.3 매개변수
- `ticker`: 종목 코드 (예: AAPL, 005930.KS)
- `period`: 조회 기간
  - 1d: 1일
  - 1w: 1주
  - 1m: 1개월
  - 1y: 1년
- `interval`: 봉 간격
  - 1m: 1분봉
  - 1h: 1시간봉
  - 1d: 일봉
- `visualize`: 차트 생성 여부 (선택적)

### 3.4 출력 예시
```
output/
└── YYYYMMDD/
    └── {종목코드}/
        ├── {종목코드}_technical_analysis.png
        └── {종목코드}_data.csv
```

## 4. 특징

### 4.1 시각화
- 깔끔한 차트 디자인
- 직관적인 색상 구분
- 고해상도 출력 (300 DPI)
- 일관된 레이아웃

### 4.2 확장성
- 새로운 기술적 지표 추가 용이
- 차트 커스터마이징 가능
- 다양한 데이터 소스 지원 가능

### 4.3 사용 편의성
- 명령행 인터페이스
- 자동 디렉토리 생성
- 상세한 분석 리포트

## 5. 최근 업데이트 내용

### 2024.06 업데이트

다음과 같은 기능 개선 및 추가가 이루어졌습니다:

1. **매수 근거 표시 개선**
   - 매수 신호 발생 위치에 버티컬라인 표시
   - 매수 근거를 45도 각도로 회전하여 겹치지 않도록 개선
   - 점수 출력 폰트 크기를 5로 변경하여 가독성 향상

2. **실행 스크립트 개선**
   - `main.sh` 스크립트 추가로 명령행 도구 접근성 개선
   - 여러 종목 동시 분석 기능 추가
   - 기간 설정, 시각화 옵션 등 다양한 인자 지원

3. **새로운 지표 추가**
   - 외국인 거래량 정보 추가 (한국 주식 전용)
   - 외국인 순매수/순매도 정보를 차트에 표시
   - 외국인 매수 신호를 전체 매수 점수에 반영

4. **UI/UX 개선**
   - 차트 시각화 레이아웃 및 가독성 개선
   - 분석 결과 요약 출력 방식 개선
   - 거래량 차트에 외국인 매수 정보 추가

5. **기타 개선사항**
   - 코드 모듈화 및 구조 개선
   - 에러 처리 강화
   - 성능 최적화

## 6. 한국 주식 외국인 거래량 데이터 사용법

한국 주식에 대한 외국인 거래량 데이터를 활용하기 위해서는 다음과 같은 사전 준비가 필요합니다:

1. **pykrx 라이브러리 설치**
   ```bash
   pip install pykrx
   ```

2. **한국 종목코드 사용**
   - 종목코드 예시: `005930.KS` (삼성전자), `035720.KQ` (카카오)
   - 또는 숫자 코드만 사용: `005930`, `035720`

3. **명령어 예시**
   ```bash
   # 삼성전자 분석 (최근 3개월)
   ./main.sh -p 3mo 005930.KS

   # 하나금융지주 분석 (특정 기간)
   ./main.sh -s 2024-01-01 -e 2024-05-31 086790.KS
   ```

4. **외국인 데이터 활용**
   - 외국인 순매수 데이터는 거래량 차트에 보조 축으로 표시됩니다
   - 외국인 순매수 신호는 매수 점수에 최대 10점 반영됩니다
   - 외국인 순매수 비율이 높을 경우 추가 점수가 부여됩니다

## 7. 주의사항

- 이 분석 도구는 투자 판단을 위한 참고용으로만 사용하세요.
- 과거 데이터 기반 분석이므로 미래 주가를 정확히 예측하지 못할 수 있습니다.
- 외국인 거래량 정보는 한국 주식 데이터에만 제공됩니다.
- 모든 투자 결정에는 추가적인 연구와 분석이 필요합니다.

## License
MIT License


